#:import utils kivy.utils
<Content_>
    adaptive_height: True
    TwoLineIconListItem:
        text: root.phone
        secondary_text: root.address
        IconLeftWidget:
            icon: 'phone'

<MainScreen>:
    name:  'Main'
    id: main
    MDFloatLayout
        md_bg_color: 1, 1, 1, 1
        Carousel:
            id: carousel
            direction: "right"
            scroll_distance: "50dp"
            size_hint: 1, 1
            pos_hint: {"center_x":0.5, "center_y":.5}
            scroll_timeout: 0
##########################################################################################################
                              #HOME SCREEN#
##########################################################################################################
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1
                Image:
                    source: "images/header.png"
                    pos_hint: {"center_x": .5, "center_y": .92}
                    size_hint_x: 0.9
                    allow_stretch: True
                MDLabel:
                    text: "[b]Meilleur vie, meilleur future[/b]"
                    pos_hint: {"center_x": 0.5, "center_y": 0.81}
                    font_size: "18sp"
                    halign: "center"
                    markup: True
                    padding_x: "10sp"

                BoxLayout:
                    pos_hint: {"center_x": 0.5, "center_y": 0.8}
                    MDList:
                        TwoLineAvatarIconListItem:
                            text: "Historique"
                            secondary_text: "Depuis 1986 à ce jour..."
                            on_release: root.manager.current= 'historic'
                            IconLeftWidget:
                                icon: "images/menu/historique.png"
                        TwoLineAvatarIconListItem:
                            text: "Marketing relationnel"
                            secondary_text: "Saviez-vous que..."
                            on_release: root.manager.current= 'marketing'
                            IconLeftWidget:
                                icon: "images/menu/marketing.png"
                        TwoLineAvatarIconListItem:
                            text: "Rénumération"
                            secondary_text: "Bonus de vente au detail..."
                            on_release: root.manager.current= 'renum'
                            IconLeftWidget:
                                icon: "images/menu/renumeration.png"
                        TwoLineAvatarIconListItem:
                            text: "Adhesion membre"
                            secondary_text: "Choisir son niveau d'entré..."
                            on_release: root.manager.current= 'adhesion'
                            IconLeftWidget:
                                icon: "images/menu/adhesion.png"


##########################################################################################################
                              #PRODUCT SCREEN#
##########################################################################################################
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1
                orientation: "vertical"
                MDLabel:
                    id: label0
                    text: "[b]Trouver vos besoin[/b]"
                    pos_hint: {"center_x":0.5, "center_y":0.95}
                    font_size: "16sp"
                    halign: "center"
                    markup: True
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
                MDTextFieldRound:
                    id: recherche
                    icon_left: "magnify"
                    #icon_right: 'eye-off'
                    hint_text: "Recherche"
                    pos_hint: {"center_x": .5, "center_y": 0.86}
                    size_hint: .8, .05
                    normal_color: utils.get_color_from_hex('#FFFFFF')
                    color_active: utils.get_color_from_hex('#FFFFFF')
                    on_text:
                        root.search_product(recherche.text)
                ScrollView:
                    size_hint: 0.9, 0.72
                    do_scroll_x: False
                    bar_width: 0
                    pos_hint: {"center_x": .5, "center_y": 0.45}
                    MDGridLayout:
                        margin_y: dp(10)
                        id: list_product
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        cols: 2

##########################################################################################################
                              #MY CART SCREEN#
##########################################################################################################
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1
                orientation: "vertical"
                md_bg_color: utils.get_color_from_hex('#FFFFFF')
                MDLabel:
                    id: label0
                    text: "[b]Mon Panier[/b]"
                    pos_hint: {"center_x":0.5, "center_y":0.95}
                    font_size: "20sp"
                    halign: "center"
                    markup: True
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
                MDSeparator:
                    pos_hint: {"center_x": .5, "center_y": 0.91}
                    size_hint: 1, None
                    height: dp(2)
                    md_bg_color: utils.get_color_from_hex('#808080')
                MDSpinner:
                    id: spinner
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    size: dp(10), dp(10)
                    pos: 540, 300
                    active: False
                ScrollView:
                    size_hint: 0.9, 0.7
                    do_scroll_x: False
                    bar_width: 0
                    pos_hint: {"center_x": .5, "center_y": 0.55}
                    MDGridLayout:
                        id: list_my_cart
                        size_hint_y: None
                        md_bg_color: utils.get_color_from_hex('#808080')
                        height: self.minimum_height
                        spacing: dp(2)
                        cols: 1
                MDFillRoundFlatButton:
                    text: "[b]Valider ma commmande[/b]"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    markup: True
                    md_bg_color: utils.get_color_from_hex('#10B34E')
                    pos_hint: {"center_x": 0.5, "center_y": 0.15}
                    size_hint: 0.8, 0.06
                    on_press: root.manager.current= 'validation'

##########################################################################################################
                              #MY STOCKIST SCREEN#
##########################################################################################################
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1
                orientation: "vertical"
                md_bg_color: utils.get_color_from_hex('#FFFFFF')
                MDLabel:
                    id: label0
                    text: "[b]List stockist[/b]"
                    pos_hint: {"center_x":0.5, "center_y":0.95}
                    font_size: "20sp"
                    halign: "center"
                    markup: True
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
                MDTextFieldRound:
                    id: recherche_stock
                    icon_left: "magnify"
                    #icon_right: 'eye-off'
                    hint_text: "Recherche"
                    pos_hint: {"center_x": .5, "center_y": 0.86}
                    size_hint: .8, .05
                    normal_color: utils.get_color_from_hex('#FFFFFF')
                    color_active: utils.get_color_from_hex('#FFFFFF')
                    on_text:
                        root.search_stockist(recherche_stock.text)
                MDSpinner:
                    id: spinner
                    size_hint: None, None
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    size: dp(10), dp(10)
                    pos: 540, 300
                    active: False
                ScrollView:
                    size_hint: 0.9, 0.8
                    do_scroll_x: False
                    bar_width: 0
                    pos_hint: {"center_x": .5, "center_y": 0.4}
                    MDGridLayout:
                        id: list_stockist
                        size_hint_y: None
                        md_bg_color: utils.get_color_from_hex('#FFFFFF')
                        height: self.minimum_height
                        spacing: dp(2)
                        cols: 1

##########################################################################################################
                              #BOTTOM NAVIGATION#
##########################################################################################################

        MDBoxLayout:
            md_bg_color: 1, 1, 1, 1
            pos_hint: {"center_x":0.5, "center_y":0.02}
            size_hint:1, 0.08
            orientation: 'horizontal'
            MDFloatLayout:
                orientation: 'vertical'
                spacing: 2
                MDIconButton:
                    id: button0
                    icon: "home-outline"
                    pos_hint: {"center_x":0.5, "center_y":0.9}
                    on_press: root.select_screen(0)
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#10B34E')
                MDLabel:
                    id: label0
                    text: "Menu"
                    pos_hint: {"center_x":0.5, "center_y":0.6}
                    font_size: "11sp"
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#10B34E')

            MDFloatLayout:
                orientation: 'vertical'
                spacing: 2
                MDIconButton:
                    id: button1
                    icon: "shopping-outline"
                    pos_hint: {"center_x":0.5, "center_y":0.9}
                    on_press:
                        root.select_screen(1)
                        root.get_all_product()
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
                MDLabel:
                    id: label1
                    text: "Produit"
                    pos_hint: {"center_x":0.5, "center_y":0.6}
                    font_size: "11sp"
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
            MDFloatLayout:
                orientation: 'vertical'
                spacing: 2
                MDIconButton:
                    id: button2
                    icon: "cart-minus"
                    pos_hint: {"center_x":0.5, "center_y":0.9}
                    on_press:
                        root.select_screen(2)
                        root.get_my_cart()
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
                MDLabel:
                    id: label2
                    text: "Mon panier"
                    pos_hint: {"center_x":0.5, "center_y":0.6}
                    font_size: "11sp"
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
            MDFloatLayout:
                orientation: 'vertical'
                spacing: 2
                MDIconButton:
                    id: button3
                    icon: "map-marker-outline"
                    pos_hint: {"center_x":0.5, "center_y":0.9}
                    on_press:
                        root.select_screen(3)
                        root.process_spinner_stockist()
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')
                MDLabel:
                    id: label3
                    text: "Stockist"
                    pos_hint: {"center_x":0.5, "center_y":0.6}
                    font_size: "11sp"
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: utils.get_color_from_hex('#000000')

